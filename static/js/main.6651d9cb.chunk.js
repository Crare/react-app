(window["webpackJsonpreact-app"]=window["webpackJsonpreact-app"]||[]).push([[0],{19:function(e,t,a){},28:function(e,t,a){e.exports=a(39)},33:function(e,t,a){},39:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(18),o=a.n(i),c=(a(33),a(5)),s=a(3),l=a(2),p=a(9),u=a(10),d=a(14),m=a(13),h=(a(19),function(e){function t(){return Object(s.a)(this,t),Object(p.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"header"},r.a.createElement("div",{className:"logo"}),r.a.createElement("h1",null,this.props.text))}}]),t}(r.a.Component)),f=a(50),v=a(51),y=a(52),E=a(53),P="PARTICIPANT_FORM_UPDATE",g="PARTICIPANTS_FETCHING",O="PARTICIPANTS_FETCH_SUCCESS",I="PARTICIPANTS_FETCH_FAIL",N="PARTICIPANT_SAVING",b="PARTICIPANT_SAVE_SUCCESS",A="PARTICIPANT_SAVE_FAIL",w="PARTICIPANT_SAVE_VALIDATION_ERROR",k="PARTICIPANTS_SORT",C="PARTICIPANT_DELETING",j="PARTICIPANT_DELETE_SUCCESS",T="PARTICIPANT_DELETE_FAIL",R="PARTICIPANT_UPDATE_SAVING",S="PARTICIPANT_UPDATE_SUCCESS",_="PARTICIPANT_UPDATE_FAIL",D="PARTICIPANT_UPDATE_VALIDATION_ERROR",L="PARTICIPANT_ERROR_EMPTY",M=function e(t,a,n,r){Object(s.a)(this,e),this.id=null,this.name="",this.email="",this.phone="",this.id=t,this.name=a,this.email=n,this.phone=r},x={firstnames:["Juhani","Maria","Johannes","Helena","Olavi","Johanna","Antero","Anneli","Tapani","Kaarina","Kalevi","Marjatta","Tapio","Anna","Matti","Liisa","Mikael","Annikki","Ilmari","Sofia"],lastnames:["Korhonen","Virtanen","M\xe4kinen","Nieminen","M\xe4kel\xe4","H\xe4m\xe4l\xe4inen","Laine","Heikkinen","Koskinen","J\xe4rvinen"]},F=["gmail.com","outlook.com","hollywood.com","elisanet.fi","yahoo.com","hotmail.com","aol.com","msn.org","verizon.net","luukku.com","yritys.fi","roskaposti.fi"],H=function(){function e(){Object(s.a)(this,e),this.lastId=0,this.participants=[],this.storedFilter=null}return Object(l.a)(e,[{key:"getParticipants",value:function(e){return 0===this.participants.length&&this.generateParticipants(20),e&&this.filterParticipants(e),{participants:this.participants}}},{key:"filterParticipants",value:function(e){if(e.sortByColumn){e.sortAscending?this.participants.sort((function(t,a){return function(e,t,a){return e[a]<t[a]?-1:e[a]>t[a]?1:0}(t,a,e.sortByColumn)})):this.participants.sort((function(t,a){return function(e,t,a){return e[a]<t[a]?1:e[a]>t[a]?-1:0}(t,a,e.sortByColumn)})),this.storedFilter=e}}},{key:"generateParticipants",value:function(e){if(!e||e<1)throw Error("no valid amount!");this.participants=[];for(var t=0;t<e;t++){var a=this.generateId(),n=this.generateName(),r=this.generateEmail(n),i=this.generatePhone(),o=new M(a,n,r,i);this.participants.push(o)}}},{key:"generateId",value:function(){return this.lastId+=1,this.lastId}},{key:"generateName",value:function(){return x.firstnames[Math.floor(Math.random()*x.firstnames.length)]+" "+x.lastnames[Math.floor(Math.random()*x.lastnames.length)]}},{key:"generateEmail",value:function(e){return e.toLowerCase().replace(new RegExp(" ","g"),".").replace(new RegExp("\xe5","g"),"a").replace(new RegExp("\xe4","g"),"a").replace(new RegExp("\xf6","g"),"o")+Math.floor(99*Math.random())+"@"+F[Math.floor(Math.random()*F.length)]}},{key:"generatePhone",value:function(){for(var e="0",t=1;t<12;t++)e+=3===t||7===t?" ":Math.floor(9*Math.random())+1;return e}},{key:"upperCaseName",value:function(e){return e=(e=e[0].toUpperCase()+e.substring(1,e.length)).substring(0,e.indexOf(" ")+1)+e[e.indexOf(" ")+1].toUpperCase()+e.substring(e.indexOf(" ")+2,e.length)}},{key:"addNewParticipant",value:function(e){if(e.id)throw Error("Not a new participant!");return e.id=this.generateId(),e.name=this.upperCaseName(e.name),this.participants.push(e),this.storedFilter&&this.filterParticipants(this.storedFilter),{participants:this.participants}}},{key:"deleteParticipant",value:function(e){var t=this.participants.findIndex((function(t){return t.id===e}));return-1!==t?(this.participants.splice(t,1),{participants:this.participants}):{error:"no_such_id"}}},{key:"updateParticipant",value:function(e){return this.participants.map((function(t){return t.id===e.id&&(t.name=e.name,t.email=e.email,t.phone=e.phone),t})),{participants:this.participants}}}]),e}(),V=function(){function e(){Object(s.a)(this,e)}return Object(l.a)(e,[{key:"validateFields",value:function(e){var t=this,a=[];return e.forEach((function(e){var n=t.validate(e.value,e.type);n.error&&a.push(n.error)})),a}},{key:"validate",value:function(e,t){switch(t){case U.NAME:return this.validateName(e);case U.EMAIL:return this.validateEmail(e);case U.PHONE:return this.validatePhone(e);default:return{error:{key:B.UNHANDLED_ERROR,text:"unhandled InputValidationType!"}}}}},{key:"validateName",value:function(e){return e.match(/^[A-\xf6]+\s[A-\xf6]+$/)?{success:!0}:{error:{key:B.INVALID_NAME,text:"Invalid name, please give firstname and lastname separated with space."}}}},{key:"validateEmail",value:function(e){return e.match(/^\w+\.*\w*@\w+\.\w+\.?\w+$/)?{success:!0}:{error:{key:B.INVALID_EMAIL,text:"Invalid email address."}}}},{key:"validatePhone",value:function(e){return e.toString().split(" ").join("").match(/^\d{3,16}$/)?{success:!0}:{error:{key:B.INVALID_PHONE,text:"Invalid phone number. Only add numbers and spaces."}}}}]),e}(),U={NAME:"NAME",EMAIL:"EMAIL",PHONE:"PHONE"},B={UNHANDLED_ERROR:"UNHANDLED_ERROR",INVALID_NAME:"INVALID_NAME",INVALID_EMAIL:"INVALID_EMAIL",INVALID_PHONE:"INVALID_PHONE"},J=new(function(){function e(){Object(s.a)(this,e),this.utils=new H,this.validator=new V}return Object(l.a)(e,[{key:"fetchParticipants",value:function(e,t){t(this.utils.getParticipants(e))}},{key:"getFormFields",value:function(e){return e.name=e.name.trim(),e.email=e.email.trim(),e.phone=e.phone.trim(),[{value:e.name,type:U.NAME},{value:e.email,type:U.EMAIL},{value:e.phone,type:U.PHONE}]}},{key:"addNewParticipant",value:function(e,t,a){var n=this.getFormFields(e),r=this.validator.validateFields(n);r.length>0?a(r):t(this.utils.addNewParticipant(e))}},{key:"deleteParticipant",value:function(e,t){t(this.utils.deleteParticipant(e))}},{key:"updateParticipant",value:function(e,t,a){var n=this.getFormFields(e),r=this.validator.validateFields(n);r.length>0?a(r):t(this.utils.updateParticipant(e))}}]),e}());function G(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var K=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(p.a)(this,Object(u.a)(t).call(this,e))).filter={sortAscending:!0,sortByColumn:""},a.state={},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchParticipants({filter:this.filter})}},{key:"componentDidUpdate",value:function(e){null!=e.editParticipant&&null===this.props.editParticipant&&this.setState({editParticipant:null})}},{key:"addHeaderSortStyling",value:function(e){return this.sortBy===e?" list-header-sortby":""}},{key:"renderHeader",value:function(){var e=this;return r.a.createElement("div",{className:"list-header"},r.a.createElement("div",{className:"list-header-item flex-width-2"+this.addHeaderSortStyling("name"),onClick:function(){return e.sortByColumn("name")}},"Name ",this.renderSortIcon("name")),r.a.createElement("div",{className:"list-header-item flex-width-3"+this.addHeaderSortStyling("email"),onClick:function(){return e.sortByColumn("email")}},"E-mail address ",this.renderSortIcon("email")),r.a.createElement("div",{className:"list-header-item flex-width-2"+this.addHeaderSortStyling("phone"),onClick:function(){return e.sortByColumn("phone")}},"Phone number ",this.renderSortIcon("phone")),r.a.createElement("div",{className:"list-header-item flex-width-2"}))}},{key:"renderSortIcon",value:function(e){if(this.filter.sortByColumn===e)return this.filter.sortAscending?r.a.createElement("div",{className:"icon-container"},r.a.createElement(f.a,{className:"icon"})):r.a.createElement("div",{className:"icon-container"},r.a.createElement(v.a,{className:"icon"}))}},{key:"sortByColumn",value:function(e){e===this.filter.sortByColumn?this.filter.sortAscending=!this.filter.sortAscending:this.filter.sortAscending=!0,this.filter=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?G(a,!0).forEach((function(t){Object(c.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):G(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},this.filter,{sortByColumn:e}),this.props.fetchParticipants({filter:this.filter})}},{key:"editRow",value:function(e){var t=this,a=this.state.editParticipant;this.props.participants.forEach((function(n){n.id===e&&(a&&a.id===n.id?t.setState({editParticipant:null}):t.setState({editParticipant:new M(n.id,n.name,n.email,n.phone)}))}))}},{key:"deleteParticipant",value:function(e){this.props.deleteParticipant({participantId:e})}},{key:"handleInputChange",value:function(e,t){var a=this.state.editParticipant;a[e]=t,this.setState({editParticipant:a})}},{key:"renderItemContent",value:function(e,t,a){var n=this,i=this.state.editParticipant;return i&&e.id===i.id?r.a.createElement("input",{name:t,value:i[t],placeholder:a,onChange:function(e){return n.handleInputChange(t,e.target.value)}}):r.a.createElement("span",null,e[t])}},{key:"cancelEdit",value:function(){this.setState({editParticipant:null}),this.props.participantEmptyErrors()}},{key:"updateParticipant",value:function(e){e.id===this.state.editParticipant.id?this.props.updateParticipant({participant:this.state.editParticipant}):console.error("wrong id: "+e.id+" is not "+this.state.editParticipant.id)}},{key:"renderRowOptions",value:function(e){var t=this,a=this.state.editParticipant;return a&&e.id===a.id?r.a.createElement("span",null,r.a.createElement("button",{className:"button-blue-text button-cancel",onClick:function(){return t.cancelEdit()}},"Cancel"),r.a.createElement("button",{className:"button-blue button-save",onClick:function(){return t.updateParticipant(e)}},"Save")):r.a.createElement("span",null,r.a.createElement(y.a,{className:"edit",onClick:function(){return t.editRow(e.id)}}),r.a.createElement(E.a,{className:"delete",onClick:function(){return t.deleteParticipant(e.id)}}))}},{key:"renderItems",value:function(){var e=this;return r.a.createElement("div",{className:"list-items"},this.props.participants.map((function(t){return r.a.createElement("div",{key:t.id,className:"list-item"},r.a.createElement("div",{className:"list-item-property flex-width-2"},e.renderItemContent(t,"name","Full name")),r.a.createElement("div",{className:"list-item-property flex-width-3"},e.renderItemContent(t,"email","E-mail address")),r.a.createElement("div",{className:"list-item-property flex-width-2"},e.renderItemContent(t,"phone","Phone number")),r.a.createElement("div",{className:"list-item-property flex-width-2 right no-padding"},e.renderRowOptions(t)))})))}},{key:"renderList",value:function(){return this.props.participants?r.a.createElement("div",{className:"list"},this.renderHeader(),this.renderItems()):this.props.loading?r.a.createElement("span",null,"Loading participants..."):r.a.createElement("span",null,"Error loading content. Try again later.")}},{key:"render",value:function(){return r.a.createElement("div",{className:"participants-view"},this.renderList())}}]),t}(r.a.Component),$=Object(m.b)((function(e){return e.participantReducer?e.participantReducer:{}}),{fetchParticipants:function(e){var t=e.filter;return function(e){e({type:g}),J.fetchParticipants(t,(function(t){t.participants?e({type:O,payload:t.participants}):e({type:I,payload:t.errors})}))}},deleteParticipant:function(e){var t=e.participantId;return function(e){e({type:C}),J.deleteParticipant(t,(function(t){t.participants?e({type:j,payload:t.participants}):t.error&&e({type:T,payload:t.error})}))}},updateParticipant:function(e){var t=e.participant;return function(e){e({type:R,payload:t}),setTimeout((function(){J.updateParticipant(t,(function(t){t.participants?e({type:S,payload:t.participants}):t.error&&e({type:_,payload:t.error})}),(function(t){e({type:D,payload:t})}))}),100)}},participantEmptyErrors:function(){return{type:L}}})(K),W=a(15),z=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(p.a)(this,Object(u.a)(t).call(this,e))).addParticipant=a.addParticipant.bind(Object(W.a)(a)),a.handleInputChange=a.handleInputChange.bind(Object(W.a)(a)),a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"addParticipant",value:function(e){e.preventDefault();var t=this.props.form,a=t.name,n=t.email,r=t.phone;this.props.addNewParticipant({name:a,email:n,phone:r})}},{key:"handleInputChange",value:function(e){var t=e.target.value,a=e.target.name;this.props.participantFormUpdate({prop:a,value:t})}},{key:"render",value:function(){var e=this.props.form,t=e.name,a=e.email,n=e.phone;return r.a.createElement("form",{onSubmit:this.addParticipant,className:"participants-form"},r.a.createElement("div",{className:"form-item flex-width-2"},r.a.createElement("input",{value:t,name:"name",placeholder:"Full name",onChange:this.handleInputChange})),r.a.createElement("div",{className:"form-item flex-width-3"},r.a.createElement("input",{value:a,name:"email",placeholder:"E-mail address",onChange:this.handleInputChange})),r.a.createElement("div",{className:"form-item flex-width-2"},r.a.createElement("input",{value:n,name:"phone",placeholder:"Phone number",onChange:this.handleInputChange})),r.a.createElement("div",{className:"form-item flex-width-1"}),r.a.createElement("div",{className:"form-item flex-width-1 no-padding"},r.a.createElement("button",{onClick:this.addParticipant},"Add new")))}}]),t}(r.a.Component),Y=Object(m.b)((function(e){return e.participantReducer.form?{form:e.participantReducer.form}:{}}),{addNewParticipant:function(e){var t=e.name,a=e.email,n=e.phone;return function(e){e({type:N}),J.addNewParticipant(new M(null,t,a,n),(function(t){!t.error&&t.participants?e({type:b,payload:t.participants}):e({type:A,payload:t.error})}),(function(t){e({type:w,payload:t})}))}},participantFormUpdate:function(e){var t=e.prop,a=e.value;return{type:P,payload:{prop:t,value:a}}}})(z);function q(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var Q=function(e){function t(){return Object(s.a)(this,t),Object(p.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"renderErrors",value:function(){if(this.props.errors&&this.props.errors.length>0)return r.a.createElement("div",{className:"errors"},this.props.errors.map((function(e){return r.a.createElement("div",{key:e.key,className:"error"},e.text)})))}},{key:"render",value:function(){return r.a.createElement("div",{className:"view-container"},r.a.createElement(h,{text:"Nord Software"}),r.a.createElement("div",{className:"page-content"},r.a.createElement("h2",{className:"title"},"List of participants"),this.renderErrors(),r.a.createElement(Y,null),r.a.createElement($,null)))}}]),t}(r.a.Component),X=Object(m.b)((function(e){if(e.participantReducer.errors){var t=e.participantReducer.errors;return t.map((function(t){return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?q(a,!0).forEach((function(t){Object(c.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):q(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e.participantReducer[t],{index:t})})),{errors:t}}return{}}),{})(Q),Z=a(16),ee=a(26);function te(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ae(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?te(a,!0).forEach((function(t){Object(c.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):te(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var ne={participants:[],form:{name:"",email:"",phone:""},loading:!1,errors:[],editParticipant:null},re=Object(Z.c)({participantReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ne,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O:case k:case j:return ae({},e,{loading:!1,errors:[],participants:t.payload});case b:case S:return ae({},e,{loading:!1,errors:[],form:ne.form,participants:t.payload,editParticipant:null});case N:case g:case C:return ae({},e,{loading:!0,errors:[]});case R:return ae({},e,{loading:!0,errors:[],editParticipant:t.payload});case A:return ae({},e,{loading:!1,form:ne.form,errors:t.payload});case w:case D:return ae({},e,{loading:!1,errors:t.payload});case P:return ae({},e,{form:ae({},e.form,Object(c.a)({},t.payload.prop,t.payload.value))});case T:case _:return ae({},e,{loading:!1,errors:[t.payload]});case L:return ae({},e,{errors:ne.errors});default:return e}}});var ie=function(){var e=Object(Z.d)(re,{},Object(Z.a)(ee.a));return r.a.createElement(m.a,{className:"App",store:e},r.a.createElement(X,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(ie,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[28,1,2]]]);
//# sourceMappingURL=main.6651d9cb.chunk.js.map